# EC2 ë°°í¬ ê°€ì´ë“œ (AWS ë†€ì´í„°)

MCP í…ŒìŠ¤íŠ¸ ì„œë²„ë¥¼ AWS ë†€ì´í„° ê³„ì •ì˜ EC2ì— ë°°í¬í•˜ê³  Cursorì—ì„œ ì—°ë™í•˜ëŠ” ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## âš ï¸ AWS ë†€ì´í„° ì£¼ì˜ì‚¬í•­

| ì •ì±… | ë‚´ìš© |
|------|------|
| **ìë™ ì‚­ì œ** | ëª¨ë“  ë¦¬ì†ŒìŠ¤ëŠ” ìƒì„±ì¼ë¡œë¶€í„° **30ì¼ í›„ ìë™ ì‚­ì œ** |
| **ìë™ ì¤‘ì§€** | EC2 ì¸ìŠ¤í„´ìŠ¤ëŠ” **ë§¤ì¼ ìƒˆë²½ 03:00ì— ì¤‘ì§€** (í•„ìš”ì‹œ ìˆ˜ë™ ì¬ì‹œì‘) |
| **ë³´ì•ˆ ê·¸ë£¹** | `0.0.0.0/0` ê·œì¹™ **ìë™ ì‚­ì œ** â†’ íŠ¹ì • IPë§Œ í—ˆìš© |
| **ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•** | `t4g.micro`, `t4g.small`, `t4g.medium`, `t4g.large` ì‚¬ìš© ê°€ëŠ¥ |

---

## 0. AWS ì½˜ì†” ì ‘ì†

1. [https://oneid.woowa.in](https://oneid.woowa.in) ë¡œê·¸ì¸
2. **x02-dev-oneid** ì—­í•  ì„ íƒ

---

## 1. EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

### ê¶Œì¥ ì„¤ì •

| í•­ëª© | ê°’ |
|------|-----|
| AMI | Amazon Linux 2023 |
| ì¸ìŠ¤í„´ìŠ¤ ìœ í˜• | `t4g.micro` (ARM, í…ŒìŠ¤íŠ¸ìš© ì¶©ë¶„) |
| VPC | `vpc-x02-play-deault-use` (ì‚¬ë¬´ì‹¤ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼ ê°€ëŠ¥) |
| í‚¤ í˜ì–´ | ê¸°ì¡´ í‚¤ ë˜ëŠ” ìƒˆë¡œ ìƒì„± |

### Node.js ì„¤ì¹˜

```bash
sudo dnf update -y
sudo dnf install -y nodejs npm
```

---

## 2. ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •

> âš ï¸ **0.0.0.0/0 ê·œì¹™ì€ ìë™ ì‚­ì œë©ë‹ˆë‹¤!**

ì‚¬ë¬´ì‹¤ ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” ë³¸ì¸ IPë§Œ í—ˆìš©:

| ìœ í˜• | í¬íŠ¸ ë²”ìœ„ | ì†ŒìŠ¤ |
|------|----------|------|
| SSH | 22 | ì‚¬ë¬´ì‹¤ IP ëŒ€ì—­ |
| Custom TCP | 3333 | ì‚¬ë¬´ì‹¤ IP ëŒ€ì—­ ë˜ëŠ” ë³¸ì¸ IP |

ë³¸ì¸ IP í™•ì¸: [https://whatismyip.com](https://whatismyip.com)

---

## 3. í”„ë¡œì íŠ¸ ì—…ë¡œë“œ

ë¡œì»¬ì—ì„œ EC2ë¡œ íŒŒì¼ ì „ì†¡:

```bash
# í•„ìš”í•œ íŒŒì¼ë§Œ scpë¡œ ì „ì†¡
scp -i your-key.pem -r dist package.json package-lock.json ec2-user@<EC2-IP>:~/mcphub-test-server/
```

---

## 4. EC2ì—ì„œ ì˜ì¡´ì„± ì„¤ì¹˜ ë° ì‹¤í–‰

```bash
# EC2ì— ì ‘ì†
ssh -i your-key.pem ec2-user@<EC2-IP>

# í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™
cd ~/mcphub-test-server

# í”„ë¡œë•ì…˜ ì˜ì¡´ì„±ë§Œ ì„¤ì¹˜
npm install --omit=dev

# HTTP ëª¨ë“œë¡œ ì‹¤í–‰ (ì™¸ë¶€ ì ‘ê·¼ í—ˆìš©)
MCPHUB_TEST_HOST=0.0.0.0 node dist/server.js --http --port 3333
```

---

## 5. í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ (PM2)

> ğŸ’¡ ë†€ì´í„°ëŠ” ë§¤ì¼ 03:00ì— EC2ê°€ ì¤‘ì§€ë˜ë¯€ë¡œ, PM2 ì„¤ì •í•´ë„ ìˆ˜ë™ ì¬ì‹œì‘ í•„ìš”

```bash
# PM2 ì„¤ì¹˜
sudo npm install -g pm2

# PM2ë¡œ ì‹¤í–‰
MCPHUB_TEST_HOST=0.0.0.0 pm2 start dist/server.js --name mcphub-test -- --http --port 3333

# ì„œë²„ ì¬ì‹œì‘ ì‹œ ìë™ ì‹¤í–‰ (EC2 ì¬ì‹œì‘ í›„ ìœ ìš©)
pm2 startup
pm2 save
```

### EC2 ì¬ì‹œì‘ í›„ ì„œë²„ ë„ìš°ê¸°

```bash
# EC2 ì½˜ì†”ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘ í›„
ssh -i your-key.pem ec2-user@<EC2-IP>
pm2 start mcphub-test
```

---

## 6. í—¬ìŠ¤ì²´í¬ í™•ì¸

```bash
# EC2 ë‚´ë¶€ì—ì„œ
curl http://localhost:3333/health

# ì™¸ë¶€ì—ì„œ (ì‚¬ë¬´ì‹¤ ë„¤íŠ¸ì›Œí¬)
curl http://<EC2-PRIVATE-IP>:3333/health
```

---

## 7. Cursor MCP ì—°ë™ ì„¤ì •

`~/.cursor/mcp.json` (ì „ì—­) ë˜ëŠ” í”„ë¡œì íŠ¸ì˜ `.cursor/mcp.json`ì— ì¶”ê°€:

```json
{
  "mcpServers": {
    "mcphub-test": {
      "url": "http://<EC2-IP>:3333/mcp"
    }
  }
}
```

> ğŸ’¡ `vpc-x02-play-deault-use` VPC ì‚¬ìš© ì‹œ **Private IP**ë¡œ ì‚¬ë¬´ì‹¤ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥

### ì—°ë™ í™•ì¸

1. Cursor ì¬ì‹œì‘ (ë˜ëŠ” MCP ì„œë²„ ìƒˆë¡œê³ ì¹¨)
2. MCP ë„êµ¬ ëª©ë¡ì—ì„œ ë‹¤ìŒ ë„êµ¬ë“¤ì´ ë³´ì´ë©´ ì„±ê³µ:
   - `provision_cloud_resource`
   - `get_server_metrics_chart`
   - `simulate_api_error`
   - `get_my_info` ë“±

---

## 8. ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸

```bash
# tools/list í™•ì¸
curl -X POST http://<EC2-IP>:3333/mcp \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"tools/list","id":1}'
```

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì—°ê²° ì•ˆ ë¨
- [ ] EC2ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸ (ë§¤ì¼ 03:00 ìë™ ì¤‘ì§€)
- [ ] ë³´ì•ˆ ê·¸ë£¹ì—ì„œ 3333 í¬íŠ¸ê°€ **íŠ¹ì • IP**ë¡œ ì—´ë ¸ëŠ”ì§€ í™•ì¸ (0.0.0.0/0 ì•ˆë¨!)
- [ ] `MCPHUB_TEST_HOST=0.0.0.0`ìœ¼ë¡œ ì‹¤í–‰í–ˆëŠ”ì§€ í™•ì¸
- [ ] VPCê°€ `vpc-x02-play-deault-use`ì¸ì§€ í™•ì¸ (ì•„ë‹ˆë©´ ì‚¬ë¬´ì‹¤ì—ì„œ ì‚¬ì„¤ IP ì ‘ê·¼ ë¶ˆê°€)

### Cursorì—ì„œ ë„êµ¬ê°€ ì•ˆ ë³´ì„
- [ ] Cursor ì¬ì‹œì‘
- [ ] mcp.json ë¬¸ë²• ì˜¤ë¥˜ í™•ì¸
- [ ] í—¬ìŠ¤ì²´í¬ ì‘ë‹µ í™•ì¸

### ë³´ì•ˆ ê·¸ë£¹ ê·œì¹™ì´ ì‚¬ë¼ì§
- [ ] 0.0.0.0/0 ê·œì¹™ì€ ìë™ ì‚­ì œë¨ â†’ íŠ¹ì • IPë¡œ ë‹¤ì‹œ ì„¤ì •

---

## ë°°í¬ ë©”ëª¨

<!-- ì‹¤ì œ ë°°í¬í•˜ë©´ì„œ ë©”ëª¨í•  ë‚´ìš© -->

- ì ‘ì† URL: 
- EC2 ì¸ìŠ¤í„´ìŠ¤ ID: 
- Private IP: 
- ìƒì„±ì¼: (30ì¼ í›„ ìë™ ì‚­ì œ ì˜ˆì •)
